{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>

    <!-- Local Fonts -->
    <link rel="stylesheet" href="{% static 'css/fonts.css' %}">

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

</head>

<body>

    <!-- Hamburger button and overlay for mobile menu -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- notifications -->
    {% if messages %}
    <div
        class="fixed top-5 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md space-y-2 px-4 pointer-events-none">

        {% for message in messages %}
        <div class="toast-message pointer-events-auto flex items-center w-full p-4 mb-4 text-gray-500 bg-white 
                    rounded-lg shadow-lg border-r-4
                    {% if 'error' in message.tags %}border-red-500
                    {% elif 'success' in message.tags %}border-green-500
                    {% else %}border-blue-500{% endif %}" role="alert">

            <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg
                        {% if 'error' in message.tags %}text-red-500 bg-red-100
                        {% elif 'success' in message.tags %}text-green-500 bg-green-100
                        {% else %}text-blue-500 bg-blue-100{% endif %}">

                <!-- Icons -->
                {% if 'error' in message.tags %}
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                        clip-rule="evenodd"></path>
                </svg>
                {% elif 'success' in message.tags %}
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"></path>
                </svg>
                {% else %}
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                        clip-rule="evenodd"></path>
                </svg>
                {% endif %}
            </div>

            <div class="mr-3 text-sm font-medium text-gray-800">{{ message }}</div>

            <button type="button"
                class="mr-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8"
                aria-label="Close" onclick="this.parentElement.remove()">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                        clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>

    <!-- notifications -->
    {% endif %}

    <div class="sidebar" id="sidebar">
        <div class="logo px-6 py-8 border-b border-white/10">
            <a href="/dashboard/" class="flex items-center gap-3 group text-white hover:no-underline">
                <div
                    class="relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 bg-white/5 p-1.5">
                    <img src="/media/logos/wifi.png" alt="logo" class="w-full h-full object-contain !m-0 !p-0">
                </div>
                <div class="flex flex-col">
                    <span class="text-xl font-bold tracking-tight">Ø§Ù„Ù‚ØµÙˆØ§Ø¡</span>
                    <span class="text-[10px] text-gray-400 -mt-1 tracking-wider uppercase">ALGASWAA</span>
                </div>
            </a>
        </div>

        <ul class="menu px-4 py-6 space-y-2">
            <li>
                <a href="/dashboard/"
                    class="{% if request.path == '/dashboard/' %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </a>
            </li>
            {% if not user.is_distributer %}
            <li>
                <a href="/servers/"
                    class="{% if '/servers/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="server" class="w-5 h-5"></i>
                    <span>Ø§Ù„Ø®ÙˆØ§Ø¯Ù…</span>
                </a>
            </li>
            {% endif %}
            {% if not user.is_distributer %}
            <li>
                <a href="/distributers/"
                    class="{% if '/distributers/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="users" class="w-5 h-5"></i>
                    <span>Ø§Ù„Ù…ÙˆØ²Ø¹ÙŠÙ†</span>
                </a>
            </li>
            {% endif %}

            {% if not user.is_distributer or user.distributer_profile.can_view_offers %}
            <li>
                <a href="/offers/"
                    class="{% if '/offers/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="tag" class="w-5 h-5"></i>
                    <span>Ø§Ù„Ø¹Ø±ÙˆØ¶</span>
                </a>
            </li>
            {% endif %}

            {% if not user.is_distributer or user.distributer_profile.can_view_vouchers %}
            <li>
                <a href="/vouchers/"
                    class="{% if '/vouchers/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="credit-card" class="w-5 h-5"></i>
                    <span>Ø§Ù„ÙƒØ±ÙˆØª</span>
                </a>
            </li>
            <li>
                <a href="/online/"
                    class="{% if '/online/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="wifi" class="w-5 h-5"></i>
                    <span>Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ù…ØªØµÙ„Ø©</span>
                </a>
            </li>
            {% endif %}

            {% if not user.is_distributer %}
            <li>
                <a href="/income/"
                    class="{% if '/income/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                    <span>Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</span>
                </a>
            </li>
            {% endif %}

            {% if not user.is_distributer or user.distributer_profile.can_view_designs %}
            <li>
                <a href="/design/"
                    class="{% if '/design/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="palette" class="w-5 h-5"></i>
                    <span>Ø§Ù„ØªØµØ§Ù…ÙŠÙ…</span>
                </a>
            </li>
            {% endif %}

            {% if not user.is_distributer %}
            <li>
                <a href="/profile/"
                    class="{% if '/profile/' in request.path %}active{% endif %} flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white/10">
                    <i data-lucide="user" class="w-5 h-5"></i>
                    <span>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span>
                </a>
            </li>
            {% endif %}
        </ul>

        <div class="sidebar-footer">
            <a href="{% url 'logout' %}" class="logout-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            </a>
        </div>
    </div>

    <div class="main-container">
        <header class="header">
            <div class="header-content">
                <button class="hamburger-btn md:hidden" id="hamburgerBtn">â˜°</button>
                <div>
                    <h1>Ù…Ø±Ø­Ø¨Ø§ØŒ {{ user.username }}</h1>
                </div>
                <div class="header-info relative">
                    <button class="user-info focus:outline-none" id="userMenuBtn">
                        <div class="user-avatar">{{ user.username | first | upper }}</div>
                        <span class="user-name" style="font-weight: 600; color: var(--dark);">{{ user.username}}</span>
                        <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7">
                            </path>
                        </svg>
                    </button>
                    <!-- Dropdown Menu -->
                    <div id="userMenuDropdown"
                        class="hidden absolute top-full left-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-1 z-50">
                        <a href="/profile/"
                            class="flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 hover:text-blue-600 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                        </a>
                        <div class="h-px bg-gray-100 my-1"></div>
                        <a href="{% url 'logout' %}"
                            class="flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                </path>
                            </svg>
                            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <main class="content">
            <div class="content-wrapper">
                {% if plan %}
                <div class="plan-hero">
                    <h2>{{ plan.name }}</h2>
                    <p>{{ plan.description }}</p>
                    <!-- Warning Notification for Unpaid Users -->
                    {% if not user.is_distributer and not user.has_paied %}
                    <div class="mt-4 p-4 bg-red-50 border-r-4 border-red-500 rounded-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="mr-3">
                                <h3 class="text-sm font-medium text-red-800">ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…</h3>
                                <div class="mt-2 text-sm text-red-700">
                                    <p>
                                        ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¯ÙØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø¯Ù…Ø©.
                                    </p>
                                    <p class="mt-1">
                                        Ø¥Ø°Ø§ Ù‚Ù…Øª Ø¨Ø§Ù„Ø¯ÙØ¹ ÙˆÙ…Ø§ Ø²Ø§Ù„Øª Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ØªØ¸Ù‡Ø±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ:
                                        <span class="font-bold">{{ tech_support.name }}</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% if not user.is_distributer %}
                    <div class="mt-6 rounded-2xl bg-gradient-to-br from-white to-gray-50 border shadow-sm p-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                            <!-- SUPPORT CARD -->
                            <div class="rounded-xl bg-white border p-5 hover:shadow transition">
                                <div class="flex items-center gap-2 mb-4">
                                    <div
                                        class="w-9 h-9 flex items-center justify-center rounded-full bg-blue-100 text-blue-600">
                                        ğŸ“
                                    </div>
                                    <h3 class="font-bold text-gray-800">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h3>
                                </div>

                                <div class="space-y-3 text-sm">
                                    <div>
                                        <div class="text-gray-500">Ø§Ù„Ø§Ø³Ù…</div>
                                        <div class="font-semibold text-gray-900">
                                            {{ tech_support.name }}
                                        </div>
                                    </div>

                                    <div>
                                        <div class="text-gray-500">Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</div>

                                        <div
                                            class="flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2 mt-1">
                                            <span class="font-mono">{{ tech_support.phone }}</span>

                                            <div class="flex items-center gap-2">
                                                <!-- COPY -->
                                                <button onclick="copyText('{{ tech_support.phone }}')"
                                                    class="text-xs text-blue-600 hover:underline">
                                                    Ù†Ø³Ø®
                                                </button>

                                                <!-- WHATSAPP -->
                                                <a href="https://wa.me/{{ tech_support.phone }}" target="_blank"
                                                    class="flex items-center gap-1 text-green-600 hover:text-green-700 text-xs font-semibold">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4"
                                                        viewBox="0 0 24 24" fill="currentColor">
                                                        <path
                                                            d="M12.04 2.01C6.58 2.01 2.15 6.44 2.15 11.9c0 1.93.5 3.82 1.45 5.5L2 22l4.7-1.53c1.6.87 3.4 1.32 5.34 1.32h.01c5.46 0 9.89-4.43 9.89-9.89S17.5 2.01 12.04 2.01zm5.73 14.2c-.24.68-1.42 1.3-1.96 1.38-.5.08-1.12.12-1.8-.12-.42-.14-.96-.31-1.66-.61-2.92-1.26-4.82-4.2-4.97-4.4-.15-.2-1.19-1.58-1.19-3.02 0-1.44.75-2.15 1.02-2.45.27-.3.6-.38.8-.38.2 0 .4 0 .57.01.18.01.42-.07.66.5.24.58.82 2 .89 2.15.07.15.12.33.02.53-.1.2-.15.33-.3.5-.15.18-.31.4-.44.54-.15.15-.31.32-.13.63.18.3.8 1.33 1.72 2.15 1.18 1.05 2.17 1.38 2.48 1.53.31.15.5.13.68-.08.18-.2.78-.9.99-1.2.2-.3.4-.25.68-.15.27.1 1.7.8 2 .95.3.15.5.22.57.35.07.12.07.7-.17 1.38z" />
                                                    </svg>
                                                    ÙˆØ§ØªØ³Ø§Ø¨
                                                </a>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>

                            <!-- BANK CARD -->
                            <div class="rounded-xl bg-white border p-5 hover:shadow transition">
                                <div class="flex items-center gap-2 mb-4">
                                    <div
                                        class="w-9 h-9 flex items-center justify-center rounded-full bg-green-100 text-green-600">
                                        ğŸ¦
                                    </div>
                                    <h3 class="font-bold text-gray-800">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ</h3>
                                </div>

                                <div class="space-y-3 text-sm">
                                    <div>
                                        <div class="text-gray-500">Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ</div>
                                        <div class="font-semibold text-gray-900">
                                            {{ tech_support.bank_name }}
                                        </div>
                                    </div>

                                    <div>
                                        <div class="text-gray-500">Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨</div>
                                        <div
                                            class="flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2 mt-1">
                                            <span class="font-mono">{{ tech_support.bank_account_holder }}</span>
                                            <button onclick="copyText('{{ tech_support.bank_account_holder }}')"
                                                class="text-xs text-blue-600 hover:underline">
                                                Ù†Ø³Ø®
                                            </button>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="text-gray-500">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</div>
                                        <div
                                            class="flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2 mt-1">
                                            <span class="font-mono">{{ tech_support.bank_account_number }}</span>
                                            <button onclick="copyText('{{ tech_support.bank_account_number }}')"
                                                class="text-xs text-blue-600 hover:underline">
                                                Ù†Ø³Ø®
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ACCOUNT CARD -->
                            <div class="rounded-xl bg-white border p-5 hover:shadow transition">
                                <div class="flex items-center gap-2 mb-4">
                                    <div
                                        class="w-9 h-9 flex items-center justify-center rounded-full bg-purple-100 text-purple-600">
                                        ğŸ‘¤
                                    </div>
                                    <h3 class="font-bold text-gray-800">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
                                </div>

                                <div class="space-y-3 text-sm">
                                    <div>
                                        <div class="text-gray-500">Ø±Ù‚Ù… Ø­Ø³Ø§Ø¨Ùƒ</div>
                                        <div
                                            class="flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2 mt-1">
                                            <span>{{ user.id }}</span>
                                            <button onclick="copyText('{{ user.id }}')"
                                                class="text-xs text-blue-600 hover:underline">
                                                Ù†Ø³Ø®
                                            </button>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="text-gray-500 mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ØªØ§Ù„ÙŠ</div>
                                        <div class="font-semibold text-gray-900">
                                            {{ next_payment_date }}
                                        </div>
                                    </div>

                                    <div>
                                        <div class="text-gray-500 mb-1">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</div>
                                        <div class="font-semibold text-red-600">
                                            {% if user.has_paied %}
                                            0
                                            {% else %}
                                            {{ user.plan.price_display }}
                                            {% endif %}
                                        </div>
                                    </div>

                                    <div class="mt-4 text-xs text-gray-500 bg-gray-50 rounded-lg p-3">
                                        âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ø¹ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„ØªÙØ¹ÙŠÙ„
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    {% endif %}

                    <div class="mt-6">

                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø®ÙˆØ§Ø¯Ù…</div>
                            <div class="stat-value">{{ total_servers }}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Ø§Ù„Ù…ØªØµÙ„ÙˆÙ† Ø§Ù„Ø¢Ù†</div>
                            <div class="stat-value">{{ online_vouchers }}</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©</div>
                            <div class="stat-value">{{ total_vouchers_created }}</div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% block content %}
                {% endblock %}
            </div>
        </main>
    </div>

    <!-- JavaScript for mobile menu toggle functionality -->
    <script>
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const sidebar = document.getElementById('sidebar');
        const menuOverlay = document.getElementById('menuOverlay');
        function copyText(text) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => showToast("ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ”"), () => fallbackCopyTextToClipboard(text));
            } else {
                fallbackCopyTextToClipboard(text);
            }
        }
        function fallbackCopyTextToClipboard(text) {
            var textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";  // Avoid scrolling to bottom
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                var successful = document.execCommand('copy');
                if (successful) showToast("ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ”");
                else showToast("ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø® âŒ");
            } catch (err) {
                showToast("ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø® âŒ");
            }
            document.body.removeChild(textArea);
        }
        function showToast(msg) {
            const toast = document.createElement("div");
            toast.innerText = msg;
            toast.className = "fixed bottom-6 left-1/2 -translate-x-1/2 bg-black text-white text-sm px-4 py-2 rounded-lg shadow z-[60]";
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 1500);
        }

        // Dropdown toggle
        const userMenuBtn = document.getElementById('userMenuBtn');
        const userMenuDropdown = document.getElementById('userMenuDropdown');

        if (userMenuBtn && userMenuDropdown) {
            userMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                userMenuDropdown.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!userMenuDropdown.contains(e.target) && !userMenuBtn.contains(e.target)) {
                    userMenuDropdown.classList.add('hidden');
                }
            });
        }

        hamburgerBtn.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            menuOverlay.classList.toggle('active');
        });

        menuOverlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            menuOverlay.classList.remove('active');
        });

        document.querySelectorAll('.menu a').forEach(link => {
            link.addEventListener('click', () => {
                sidebar.classList.remove('active');
                menuOverlay.classList.remove('active');
            });
        });

        // Initialize Lucide Icons
        lucide.createIcons();
    </script>
</body>

</html>